<script type="text/javascript">
    // Disable +/- buttons outside 1â€“99 range
    function handleEnableDisable(itemId) {
        var input = $(`#id_qty_${itemId}`);
        var currentValue = parseInt(input.val(), 10);

        var minusDisabled = currentValue <= 1;
        var plusDisabled = currentValue >= 99;

        $(`#decrement-qty_${itemId}`).prop('disabled', minusDisabled);
        $(`#increment-qty_${itemId}`).prop('disabled', plusDisabled);
    }

    // Initial setup on page load
    $('.qty_input').each(function () {
        var itemId = $(this).data('item_id');
        handleEnableDisable(itemId);
    });

    // Prevent unintended form submission on input change
    $('.qty_input').on('input', function () {
        var itemId = $(this).data('item_id');
        handleEnableDisable(itemId);
    });

    // Increment quantity
    $('.increment-qty').click(function (e) {
        e.preventDefault();

        var itemId = $(this).data('item_id');
        var input = $(`#id_qty_${itemId}`);
        var currentValue = parseInt(input.val(), 10);

        if (currentValue < 99) {
            input.val(currentValue + 1).trigger('input');
        }
    });

    // Decrement quantity
    $('.decrement-qty').click(function (e) {
        e.preventDefault();

        var itemId = $(this).data('item_id');
        var input = $(`#id_qty_${itemId}`);
        var currentValue = parseInt(input.val(), 10);

        if (currentValue > 1) {
            input.val(currentValue - 1).trigger('input');
        }
    });
</script>